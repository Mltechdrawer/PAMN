
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.14">
    
    
      
        <title>Ejemplos - Programación de Aplicaciones Móviles Nativas</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.342714a4.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../styles/extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#ejemplos" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Programación de Aplicaciones Móviles Nativas" class="md-header__button md-logo" aria-label="Programación de Aplicaciones Móviles Nativas" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Programación de Aplicaciones Móviles Nativas
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Ejemplos
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Programación de Aplicaciones Móviles Nativas" class="md-nav__button md-logo" aria-label="Programación de Aplicaciones Móviles Nativas" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Programación de Aplicaciones Móviles Nativas
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Inicio
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../contenidos/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Contenidos
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Bloque 1. Ingeniería de desarrollo de aplicaciones móviles nativas
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Bloque 1. Ingeniería de desarrollo de aplicaciones móviles nativas
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_1" >
        
          
          <label class="md-nav__link" for="__nav_3_1" id="__nav_3_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Ciclo de vida y arquitectura
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_1">
            <span class="md-nav__icon md-icon"></span>
            Ciclo de vida y arquitectura
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Bloque1_Ingenieria_Apps/ciclo_vida_arquitectura/ciclo_vida_devops/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Ciclo de Vida - DevOps
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Bloque1_Ingenieria_Apps/ciclo_vida_arquitectura/arquitectura/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Arquitectura
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2" >
        
          
          <label class="md-nav__link" for="__nav_3_2" id="__nav_3_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Accesibilidad y normativa
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_2">
            <span class="md-nav__icon md-icon"></span>
            Accesibilidad y normativa
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Bloque1_Ingenieria_Apps/accesibilidad_normativa/accesibilidad/accesibilidad/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Accesibilidad
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Bloque1_Ingenieria_Apps/accesibilidad_normativa/normativa/normativa/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Normativa
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Bloque1_Ingenieria_Apps/diseno_interfaces/diseno_interfaces/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Diseño de interfaces
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Bloque 2. Desarrollo de aplicaciones móviles nativas
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Bloque 2. Desarrollo de aplicaciones móviles nativas
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_1" >
        
          
          <label class="md-nav__link" for="__nav_4_1" id="__nav_4_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Sistemas Operativos para dispositivos móviles
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_1">
            <span class="md-nav__icon md-icon"></span>
            Sistemas Operativos para dispositivos móviles
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../sistemas_operativos/sistemas_operativos/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Sistemas Operativos
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../sistemas_operativos/lenguajes_programacion/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Lenguajes de programación para aplicaciones móviles
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../sistemas_operativos/frameworks_desarrollo/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Frameworks de desarrollo para aplicaciones móviles
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../bases_datos/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Bases de datos para aplicaciones móviles nativas
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_3" >
        
          
          <label class="md-nav__link" for="__nav_4_3" id="__nav_4_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Patrones de diseño
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_3">
            <span class="md-nav__icon md-icon"></span>
            Patrones de diseño
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../patrones_diseno/principios/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Principios
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../patrones_diseno/creacionales/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Patrones de diseño creacionales
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../patrones_diseno/estructurales/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Patrones de diseño estructurales
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../patrones_diseno/comportamiento/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Patrones de diseño de comportamiento
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../arquitecturabase_componentes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Arquitectura base y componentes
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../calidad_software/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Calidad del software
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Bloque 3. Programación y despliegue de aplicaciones móviles nativas
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Bloque 3. Programación y despliegue de aplicaciones móviles nativas
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Bloque3_Programacion_Despliegue/sensores_integracion_datos/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Sensores e integración de datos
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Bloque3_Programacion_Despliegue/errores_logging/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Gestión de errores y logging
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Bloque3_Programacion_Despliegue/despliegue_apps/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Despliegue de aplicaciones
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#ejemplo1-aplicacion-de-lista-de-tareas-todo-app" class="md-nav__link">
    <span class="md-ellipsis">
      Ejemplo1: aplicación de lista de tareas (ToDo App)
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ejemplo-practico-todo-app-con-room-mvvm" class="md-nav__link">
    <span class="md-ellipsis">
      Ejemplo práctico: ToDo App con Room + MVVM
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Ejemplo práctico: ToDo App con Room + MVVM">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-entidad-task" class="md-nav__link">
    <span class="md-ellipsis">
      1) Entidad (Task)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-dao-taskdao" class="md-nav__link">
    <span class="md-ellipsis">
      2) DAO (TaskDao)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-base-de-datos-appdatabase" class="md-nav__link">
    <span class="md-ellipsis">
      3) Base de datos (AppDatabase)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-repositorio-taskrepository" class="md-nav__link">
    <span class="md-ellipsis">
      4) Repositorio (TaskRepository)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5-viewmodel-taskviewmodel" class="md-nav__link">
    <span class="md-ellipsis">
      5) ViewModel (TaskViewModel)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#6-conexion-con-la-ui-idea-general" class="md-nav__link">
    <span class="md-ellipsis">
      6) Conexión con la UI (idea general)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ventajas-principales" class="md-nav__link">
    <span class="md-ellipsis">
      Ventajas principales
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#corrutinas" class="md-nav__link">
    <span class="md-ellipsis">
      Corrutinas
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#flow" class="md-nav__link">
    <span class="md-ellipsis">
      Flow
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#livedata" class="md-nav__link">
    <span class="md-ellipsis">
      LiveData
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#viewmodel" class="md-nav__link">
    <span class="md-ellipsis">
      ViewModel
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="ejemplos">Ejemplos</h1>
<h3 id="ejemplo1-aplicacion-de-lista-de-tareas-todo-app">Ejemplo1: aplicación de lista de tareas (ToDo App)</h3>
<p>Imaginemos una aplicación de lista de tareas, donde el usuario puede crear, editar y marcar tareas como completadas.<br />
Si la información se almacenara solo en memoria, al cerrar la app o reiniciar el móvil todas las tareas se perderían.  </p>
<p>Para evitarlo, la app debe <strong>persistir los datos</strong> de las tareas en una base de datos local (por ejemplo, usando <strong>Room</strong> o <strong>SQLite</strong>), de modo que al volver a abrir la aplicación las tareas sigan allí, incluso sin conexión a internet.</p>
<p>En este caso:</p>
<ul>
<li>El <strong>modelo de datos</strong> incluye atributos como <code>id</code>, <code>título</code>, <code>descripción</code> y <code>estado</code>.  </li>
<li>El <strong>DAO</strong> gestiona operaciones como insertar, actualizar o eliminar tareas.  </li>
<li>El <strong>ViewModel</strong> expone la lista de tareas a la interfaz mediante <code>LiveData</code>.  </li>
<li>Y la <strong>base de datos Room</strong> garantiza que la información persista en el dispositivo.</li>
</ul>
<p>Este tipo de persistencia es fundamental en casi todas las apps: desde un gestor de notas hasta un calendario o una aplicación de seguimiento de hábitos.</p>
<h3 id="ejemplo-practico-todo-app-con-room-mvvm">Ejemplo práctico: ToDo App con Room + MVVM</h3>
<p>A continuación se muestra un esqueleto mínimo para persistir tareas localmente con Room e integrarlo en una arquitectura MVVM.</p>
<div class="admonition info inline end">
<p class="admonition-title">Entity</p>
<p>Definimos una entidad de base de datos en Room, concretamente: una data class de Kotlin anotada con @Entity, que representa una tabla de la base de datos Room.</p>
<p>Cada propiedad de la clase corresponde a una columna de la tabla, y cada instancia de la clase será una fila (registro).</p>
</div>

<h4 id="1-entidad-task">1) Entidad (<code>Task</code>)</h4>
<div class="highlight"><pre><span></span><code><span class="k">import</span><span class="w"> </span><span class="nn">androidx.room.Entity</span>
<span class="k">import</span><span class="w"> </span><span class="nn">androidx.room.PrimaryKey</span>

<span class="nd">@Entity</span><span class="p">(</span><span class="n">tableName</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;tasks&quot;</span><span class="p">)</span>
<span class="kd">data</span><span class="w"> </span><span class="kd">class</span><span class="w"> </span><span class="nc">Task</span><span class="p">(</span>
<span class="w">    </span><span class="nd">@PrimaryKey</span><span class="p">(</span><span class="n">autoGenerate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span><span class="p">)</span><span class="w"> </span><span class="kd">val</span><span class="w"> </span><span class="nv">id</span><span class="p">:</span><span class="w"> </span><span class="kt">Long</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0L</span><span class="p">,</span>
<span class="w">    </span><span class="kd">val</span><span class="w"> </span><span class="nv">title</span><span class="p">:</span><span class="w"> </span><span class="kt">String</span><span class="p">,</span>
<span class="w">    </span><span class="kd">val</span><span class="w"> </span><span class="nv">description</span><span class="p">:</span><span class="w"> </span><span class="kt">String</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="kd">val</span><span class="w"> </span><span class="nv">done</span><span class="p">:</span><span class="w"> </span><span class="kt">Boolean</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span>
<span class="w">    </span><span class="kd">val</span><span class="w"> </span><span class="nv">createdAt</span><span class="p">:</span><span class="w"> </span><span class="kt">Long</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">System</span><span class="p">.</span><span class="na">currentTimeMillis</span><span class="p">()</span>
<span class="p">)</span>
</code></pre></div>
<h4 id="2-dao-taskdao">2) DAO (TaskDao)</h4>
<details>
<summary>Data Access Object</summary>
<p>Un DAO es una interfaz o clase que define métodos de acceso a la base de datos: consultas, inserciones, actualizaciones y eliminaciones.</p>
<p>El DAO (Data Access Object) es un componente clave del patrón Room —y, en general, de cualquier arquitectura que gestione bases de datos—.</p>
<p>Su propósito es aislar la lógica de acceso a los datos del resto de la aplicación, haciendo que el código sea más limpio, mantenible y comprobable.</p>
<p>En Room, los DAO se marcan con la anotación @Dao y Room se encarga automáticamente de generar la implementación real de esa interfaz en tiempo de compilación.</p>
<ul>
  <li>Define qué operaciones se pueden hacer sobre la base de datos.</li>
  <li>Encapsula todas las consultas SQL y evita que estén repartidas por la app.</li>
  <li>Permite que los datos se obtengan de forma asíncrona (con <code>suspend</code>, <code>Flow</code> o <code>LiveData</code>).</li>
  <li>Room valida las consultas y sus tipos en tiempo de compilación —si hay un error en el SQL, el IDE lo detecta antes de ejecutar la app.</li>
</ul>
</details>

<div class="admonition info inline end">
<p class="admonition-title">TaskDAO</p>
<p>Definimos qué operaciones se pueden hacer sobre los datos (consultar, insertar, actualizar, borrar…)..</p>
<ul>
<li>@Query para Ejecutar consultas SQL.</li>
<li>@Insert, @Update, @Delete para Operaciones CRUD.</li>
<li>Flow para implementar Reactividad → actualiza la UI cuando cambian los datos.</li>
<li>suspend para ejecutar sin bloquear el hilo principal.</li>
</ul>
</div>

<div class="highlight"><pre><span></span><code><span class="k">import</span><span class="w"> </span><span class="nn">androidx.room.*</span>
<span class="k">import</span><span class="w"> </span><span class="nn">kotlinx.coroutines.flow.Flow</span>

<span class="nd">@Dao</span>
<span class="kd">interface</span><span class="w"> </span><span class="nc">TaskDao</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="nd">@Query</span><span class="p">(</span><span class="s">&quot;SELECT * FROM tasks ORDER BY done ASC, createdAt DESC&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="kd">fun</span><span class="w"> </span><span class="nf">observeAll</span><span class="p">():</span><span class="w"> </span><span class="n">Flow</span><span class="o">&lt;</span><span class="n">List</span><span class="o">&lt;</span><span class="n">Task</span><span class="o">&gt;&gt;</span>

<span class="w">    </span><span class="nd">@Query</span><span class="p">(</span><span class="s">&quot;SELECT * FROM tasks WHERE id = :id&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="kd">suspend</span><span class="w"> </span><span class="kd">fun</span><span class="w"> </span><span class="nf">getById</span><span class="p">(</span><span class="n">id</span><span class="p">:</span><span class="w"> </span><span class="kt">Long</span><span class="p">):</span><span class="w"> </span><span class="n">Task?</span>

<span class="w">    </span><span class="nd">@Insert</span><span class="p">(</span><span class="n">onConflict</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">OnConflictStrategy</span><span class="p">.</span><span class="na">REPLACE</span><span class="p">)</span>
<span class="w">    </span><span class="kd">suspend</span><span class="w"> </span><span class="kd">fun</span><span class="w"> </span><span class="nf">upsert</span><span class="p">(</span><span class="n">task</span><span class="p">:</span><span class="w"> </span><span class="n">Task</span><span class="p">):</span><span class="w"> </span><span class="kt">Long</span>

<span class="w">    </span><span class="nd">@Update</span>
<span class="w">    </span><span class="kd">suspend</span><span class="w"> </span><span class="kd">fun</span><span class="w"> </span><span class="nf">update</span><span class="p">(</span><span class="n">task</span><span class="p">:</span><span class="w"> </span><span class="n">Task</span><span class="p">)</span>

<span class="w">    </span><span class="nd">@Delete</span>
<span class="w">    </span><span class="kd">suspend</span><span class="w"> </span><span class="kd">fun</span><span class="w"> </span><span class="nf">delete</span><span class="p">(</span><span class="n">task</span><span class="p">:</span><span class="w"> </span><span class="n">Task</span><span class="p">)</span>

<span class="w">    </span><span class="nd">@Query</span><span class="p">(</span><span class="s">&quot;DELETE FROM tasks WHERE done = 1&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="kd">suspend</span><span class="w"> </span><span class="kd">fun</span><span class="w"> </span><span class="nf">deleteCompleted</span><span class="p">()</span>
<span class="p">}</span>
</code></pre></div>
<h4 id="3-base-de-datos-appdatabase">3) Base de datos (AppDatabase)</h4>
<div class="admonition info inline end">
<p class="admonition-title">AppDatabase</p>
<p>Definimos la base de datos  que va a utilizar Room</p>
<ul>
<li>@Database(...) -> describe la base de datos de Room.</li>
<li>entities = [Task::class] -> tablas que forman la BD. </li>
<li>exportSchema = true -> Permite exportar el esquema para control de versiones</li>
<li>AppDatabase : RoomDatabase() -> Hereda de RoomDatabase</li>
<li>abstract fun taskDao() -> Room generará la implementación real y esta función será el punto de acceso para usar el DAO..</li>
</ul>
</div>

<div class="highlight"><pre><span></span><code><span class="k">import</span><span class="w"> </span><span class="nn">androidx.room.Database</span>
<span class="k">import</span><span class="w"> </span><span class="nn">androidx.room.RoomDatabase</span>


<span class="nd">@Database</span><span class="p">(</span><span class="n">entities</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">[</span><span class="n">Task</span><span class="o">::</span><span class="n">class</span><span class="o">]</span><span class="p">,</span><span class="w"> </span><span class="n">version</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="n">exportSchema</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span><span class="p">)</span>
<span class="kd">abstract</span><span class="w"> </span><span class="kd">class</span><span class="w"> </span><span class="nc">AppDatabase</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">RoomDatabase</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">abstract</span><span class="w"> </span><span class="kd">fun</span><span class="w"> </span><span class="nf">taskDao</span><span class="p">():</span><span class="w"> </span><span class="n">TaskDao</span>
<span class="p">}</span>
</code></pre></div>
<blockquote>
<p>Inicialización típica (p. ej., en un Module de Hilt o en una clase App):</p>
</blockquote>
<div class="highlight"><pre><span></span><code><span class="k">import</span><span class="w"> </span><span class="nn">android.content.Context</span>
<span class="k">import</span><span class="w"> </span><span class="nn">androidx.room.Room</span>


<span class="kd">fun</span><span class="w"> </span><span class="nf">provideDatabase</span><span class="p">(</span><span class="n">context</span><span class="p">:</span><span class="w"> </span><span class="n">Context</span><span class="p">):</span><span class="w"> </span><span class="n">AppDatabase</span><span class="w"> </span><span class="o">=</span>
<span class="w">    </span><span class="n">Room</span><span class="p">.</span><span class="na">databaseBuilder</span><span class="p">(</span><span class="n">context</span><span class="p">,</span><span class="w"> </span><span class="n">AppDatabase</span><span class="o">::</span><span class="n">class</span><span class="p">.</span><span class="na">java</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;todo.db&quot;</span><span class="p">)</span>
<span class="w">        </span><span class="p">.</span><span class="na">fallbackToDestructiveMigrationOnDowngrade</span><span class="p">()</span><span class="w"> </span><span class="c1">// Solo para desarrollo, evita en producción</span>
<span class="w">        </span><span class="p">.</span><span class="na">build</span><span class="p">()</span>
</code></pre></div>
<h4 id="4-repositorio-taskrepository">4) Repositorio (TaskRepository)</h4>
<div class="admonition info inline end">
<p class="admonition-title">TaskRepository</p>
<p>Clase que encapsula el acceso a los datos.</p>
<ul>
<li>Recibe el TaskDao por inyección de dependencias.</li>
<li>Devuelve un Flow con la lista de tareas y actualiza UI.</li>
<li>Crea una nueva tarea que guarda o actualiza</li>
<li>ToggleDone -> Busca una tarea</li>
<li>remove-clearCompleted -> Borra tarea o todas las terminadas.</li>
</ul>
</div>

<div class="highlight"><pre><span></span><code><span class="k">import</span><span class="w"> </span><span class="nn">kotlinx.coroutines.flow.Flow</span>

<span class="kd">class</span><span class="w"> </span><span class="nc">TaskRepository</span><span class="p">(</span><span class="kd">private</span><span class="w"> </span><span class="kd">val</span><span class="w"> </span><span class="nv">dao</span><span class="p">:</span><span class="w"> </span><span class="n">TaskDao</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="kd">fun</span><span class="w"> </span><span class="nf">observeTasks</span><span class="p">():</span><span class="w"> </span><span class="n">Flow</span><span class="o">&lt;</span><span class="n">List</span><span class="o">&lt;</span><span class="n">Task</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">dao</span><span class="p">.</span><span class="na">observeAll</span><span class="p">()</span>

<span class="w">    </span><span class="kd">suspend</span><span class="w"> </span><span class="kd">fun</span><span class="w"> </span><span class="nf">add</span><span class="p">(</span><span class="n">title</span><span class="p">:</span><span class="w"> </span><span class="kt">String</span><span class="p">,</span><span class="w"> </span><span class="n">description</span><span class="p">:</span><span class="w"> </span><span class="kt">String</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="p">):</span><span class="w"> </span><span class="kt">Long</span><span class="w"> </span><span class="o">=</span>
<span class="w">        </span><span class="n">dao</span><span class="p">.</span><span class="na">upsert</span><span class="p">(</span><span class="n">Task</span><span class="p">(</span><span class="n">title</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">title</span><span class="p">,</span><span class="w"> </span><span class="n">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">description</span><span class="p">))</span>

<span class="w">    </span><span class="kd">suspend</span><span class="w"> </span><span class="kd">fun</span><span class="w"> </span><span class="nf">toggleDone</span><span class="p">(</span><span class="n">id</span><span class="p">:</span><span class="w"> </span><span class="kt">Long</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kd">val</span><span class="w"> </span><span class="nv">t</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">dao</span><span class="p">.</span><span class="na">getById</span><span class="p">(</span><span class="n">id</span><span class="p">)</span><span class="w"> </span><span class="o">?:</span><span class="w"> </span><span class="k">return</span>
<span class="w">        </span><span class="n">dao</span><span class="p">.</span><span class="na">update</span><span class="p">(</span><span class="n">t</span><span class="p">.</span><span class="na">copy</span><span class="p">(</span><span class="n">done</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">!</span><span class="n">t</span><span class="p">.</span><span class="na">done</span><span class="p">))</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kd">suspend</span><span class="w"> </span><span class="kd">fun</span><span class="w"> </span><span class="nf">remove</span><span class="p">(</span><span class="n">task</span><span class="p">:</span><span class="w"> </span><span class="n">Task</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">dao</span><span class="p">.</span><span class="na">delete</span><span class="p">(</span><span class="n">task</span><span class="p">)</span>

<span class="w">    </span><span class="kd">suspend</span><span class="w"> </span><span class="kd">fun</span><span class="w"> </span><span class="nf">clearCompleted</span><span class="p">()</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">dao</span><span class="p">.</span><span class="na">deleteCompleted</span><span class="p">()</span>
<span class="p">}</span>
</code></pre></div>
<h4 id="5-viewmodel-taskviewmodel">5) ViewModel (TaskViewModel)</h4>
<div class="admonition info inline end">
<p class="admonition-title">TaskViewModel</p>
<p>ViewModel vive mientras la pantalla está visible y sobrevive a rotaciones. Mantiene el estado de la UI. Llama al repositorio. Ejecuta corrutinas sin bloquear la UI.</p>
<ul>
<li>repository.observeTasks() -> Devuelve un Flow-List-Task desde Room.</li>
<li>.stateIn(...) -> Convierte el Flow en un StateFlow, algo que la UI puede observar fácilmente y que mantiene el último valor.</li>
<li>CviewModelScope -> Contexto de corrutinas del ViewModel — se cancela al destruirse.</li>
<li>SharingStarted.Lazily -> El flujo se empezará a observar sólo cuando alguien lo use.</li>
<li>emptyList() -> Valor inicial mientras se carga.</li>
</ul>
</div>

<div class="highlight"><pre><span></span><code><span class="k">import</span><span class="w"> </span><span class="nn">androidx.lifecycle.ViewModel</span>
<span class="k">import</span><span class="w"> </span><span class="nn">androidx.lifecycle.viewModelScope</span>
<span class="k">import</span><span class="w"> </span><span class="nn">kotlinx.coroutines.flow.SharingStarted</span>
<span class="k">import</span><span class="w"> </span><span class="nn">kotlinx.coroutines.flow.stateIn</span>
<span class="k">import</span><span class="w"> </span><span class="nn">kotlinx.coroutines.launch</span>

<span class="c1">// Inyección de dependencias para recibir el respositorio</span>
<span class="kd">class</span><span class="w"> </span><span class="nc">TaskViewModel</span><span class="p">(</span><span class="kd">private</span><span class="w"> </span><span class="kd">val</span><span class="w"> </span><span class="nv">repository</span><span class="p">:</span><span class="w"> </span><span class="n">TaskRepository</span><span class="p">)</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">ViewModel</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="c1">// Estado observable por la UI (Flow -&gt; StateFlow)</span>
<span class="w">    </span><span class="kd">val</span><span class="w"> </span><span class="nv">tasks</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">repository</span><span class="p">.</span><span class="na">observeTasks</span><span class="p">()</span>
<span class="w">        </span><span class="p">.</span><span class="na">stateIn</span><span class="p">(</span><span class="n">viewModelScope</span><span class="p">,</span><span class="w"> </span><span class="n">SharingStarted</span><span class="p">.</span><span class="na">Lazily</span><span class="p">,</span><span class="w"> </span><span class="n">emptyList</span><span class="p">())</span>

<span class="w">    </span><span class="kd">fun</span><span class="w"> </span><span class="nf">addTask</span><span class="p">(</span><span class="n">title</span><span class="p">:</span><span class="w"> </span><span class="kt">String</span><span class="p">,</span><span class="w"> </span><span class="n">description</span><span class="p">:</span><span class="w"> </span><span class="kt">String</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="p">)</span><span class="w"> </span><span class="o">=</span>
<span class="w">        </span><span class="n">viewModelScope</span><span class="p">.</span><span class="na">launch</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">repository</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="n">title</span><span class="p">,</span><span class="w"> </span><span class="n">description</span><span class="p">)</span><span class="w"> </span><span class="p">}</span>

<span class="w">    </span><span class="kd">fun</span><span class="w"> </span><span class="nf">toggle</span><span class="p">(</span><span class="n">id</span><span class="p">:</span><span class="w"> </span><span class="kt">Long</span><span class="p">)</span><span class="w"> </span><span class="o">=</span>
<span class="w">        </span><span class="n">viewModelScope</span><span class="p">.</span><span class="na">launch</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">repository</span><span class="p">.</span><span class="na">toggleDone</span><span class="p">(</span><span class="n">id</span><span class="p">)</span><span class="w"> </span><span class="p">}</span>

<span class="w">    </span><span class="kd">fun</span><span class="w"> </span><span class="nf">delete</span><span class="p">(</span><span class="n">task</span><span class="p">:</span><span class="w"> </span><span class="n">Task</span><span class="p">)</span><span class="w"> </span><span class="o">=</span>
<span class="w">        </span><span class="n">viewModelScope</span><span class="p">.</span><span class="na">launch</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">repository</span><span class="p">.</span><span class="na">remove</span><span class="p">(</span><span class="n">task</span><span class="p">)</span><span class="w"> </span><span class="p">}</span>

<span class="w">    </span><span class="kd">fun</span><span class="w"> </span><span class="nf">clearCompleted</span><span class="p">()</span><span class="w"> </span><span class="o">=</span>
<span class="w">        </span><span class="n">viewModelScope</span><span class="p">.</span><span class="na">launch</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">repository</span><span class="p">.</span><span class="na">clearCompleted</span><span class="p">()</span><span class="w"> </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<h4 id="6-conexion-con-la-ui-idea-general">6) Conexión con la UI (idea general)</h4>
<div class="admonition info inline end">
<p class="admonition-title">Conexión con la UI</p>
<p>Idea general. Flujo completo.</p>
<ul>
<li>viewLifecycleOwner.lifecycleScope -> Scope ligado al ciclo de vida del Fragment</li>
<li>launchWhenStarted -> Colecciona si la UI está visible.</li>
<li>viewModel.tasks.collect -> list -> adapter.submitList(list) - Cuando la lista cambia, el RecyclerView se vuelve a renderizar.</li>
</ul>
</div>

<ul>
<li>
<p>La Activity o Fragment colecciona tasks (StateFlow) y renderiza la lista.</p>
</li>
<li>
<p>Las acciones del usuario (añadir, marcar, borrar) llaman a métodos del ViewModel.</p>
</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="c1">// En un Fragment (ejemplo con lifecycleScope)</span>
<span class="n">viewLifecycleOwner</span><span class="p">.</span><span class="na">lifecycleScope</span><span class="p">.</span><span class="na">launchWhenStarted</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">viewModel</span><span class="p">.</span><span class="na">tasks</span><span class="p">.</span><span class="na">collect</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">list</span><span class="w"> </span><span class="o">-&gt;</span>
<span class="w">        </span><span class="n">adapter</span><span class="p">.</span><span class="na">submitList</span><span class="p">(</span><span class="n">list</span><span class="p">)</span><span class="w"> </span><span class="c1">// Renderizar lista</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="c1">// Acciones</span>
<span class="n">addButton</span><span class="p">.</span><span class="na">setOnClickListener</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">viewModel</span><span class="p">.</span><span class="na">addTask</span><span class="p">(</span><span class="n">inputTitle</span><span class="p">.</span><span class="na">text</span><span class="p">.</span><span class="na">toString</span><span class="p">())</span><span class="w"> </span><span class="p">}</span>
</code></pre></div>
<blockquote>
<p>Esto hace que la lista se actualice automáticamente cuando la BD cambia.
Sin que la UI tenga que "preguntar" cada vez.</p>
</blockquote>
<h4 id="ventajas-principales">Ventajas principales</h4>
<ul>
<li>Menos código repetitivo: genera automáticamente las implementaciones de los DAO.</li>
<li>Validación en tiempo de compilación: detecta errores en las consultas SQL antes de ejecutar la app.</li>
<li>Integración moderna: compatible con <a href="./#corrutinas">Coroutines</a>, <a href="./#flow">Flow</a>, <a href="./#livedata">LiveData</a> y <a href="./#viewmodel">ViewModel</a>.</li>
<li>Soporte para migraciones: permite cambiar el esquema de la base de datos sin perder datos.</li>
<li>Compatible con arquitectura MVVM o Clean Architecture.</li>
</ul>
<hr />
<h4 id="corrutinas">Corrutinas</h4>
<p>Son la forma ligera y eficiente de realizar programación asíncrona y concurrente sin necesidad de manejar directamente hilos (threads). En lugar de bloquear un hilo mientras se espera una operación (por ejemplo, una consulta a base de datos o una petición HTTP), una corrutina suspende su ejecución y el hilo queda libre para hacer otras tareas.   </p>
<p>Cuando la operación termina, la corrutina retoma exactamente donde lo dejó.</p>
<details>
<summary>Ejemplo</summary>

<div class="highlight"><pre><span></span><code><span class="k">import</span><span class="w"> </span><span class="nn">kotlinx.coroutines.*</span>

<span class="kd">fun</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">runBlocking</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">launch</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">delay</span><span class="p">(</span><span class="m">1000</span><span class="p">)</span>
<span class="w">        </span><span class="n">println</span><span class="p">(</span><span class="s">&quot;Hola desde la corrutina&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="n">println</span><span class="p">(</span><span class="s">&quot;Hola desde el hilo principal&quot;</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div>
</details>
<hr />
<h4 id="flow">Flow</h4>
<p>Es una API de flujo de datos asíncronos pensada para emitir múltiples valores a lo largo del tiempo, de forma reactiva y no bloqueante.<br />
Se usa cuando tenemos datos que cambian con el tiempo, por ejemplo:
- Lecturas continuas desde una base de datos.
- Eventos de UI.
- Streams de sensores.
- Resultados de peticiones que se actualizan periódicamente.</p>
<details>
<summary>Ejemplo</summary>

<div class="highlight"><pre><span></span><code><span class="k">import</span><span class="w"> </span><span class="nn">kotlinx.coroutines.*</span>
<span class="k">import</span><span class="w"> </span><span class="nn">kotlinx.coroutines.flow.*</span>

<span class="kd">fun</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">runBlocking</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">val</span><span class="w"> </span><span class="nv">numbersFlow</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">flow</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="m">1.</span><span class="p">.</span><span class="m">5</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">delay</span><span class="p">(</span><span class="m">500</span><span class="p">)</span>
<span class="w">            </span><span class="n">emit</span><span class="p">(</span><span class="n">i</span><span class="p">)</span><span class="w"> </span><span class="c1">// Emitimos valores</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="n">numbersFlow</span><span class="p">.</span><span class="na">collect</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="o">-&gt;</span>
<span class="w">        </span><span class="n">println</span><span class="p">(</span><span class="s">&quot;Recibido: </span><span class="si">$</span><span class="n">value</span><span class="s">&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
</details>
<hr />
<h4 id="livedata">LiveData</h4>
<p>Es una clase de Android (parte de Android Jetpack) que permite almacenar y observar datos de forma reactiva. Su objetivo principal es que la interfaz de usuario (UI) se actualice automáticamente cuando los datos cambian, respetando el ciclo de vida de las actividades y fragmentos.</p>
<p>Cuando trabajamos con Activities/Fragments, estos pueden:<br />
- Girar (cambio de orientación)<br />
- Entrar en background<br />
- Ser destruidos y recreados  </p>
<p>Si la UI observa datos directamente sin tener en cuenta el ciclo de vida, puedes tener:<br />
- Fugas de memoria<br />
- Llamadas duplicadas<br />
- Código difícil de mantener  </p>
<p>LiveData se encarga de evitar eso automáticamente.</p>
<details>
<summary>Ejemplo</summary>

<div class="highlight"><pre><span></span><code><span class="kd">class</span><span class="w"> </span><span class="nc">MiViewModel</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">ViewModel</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">val</span><span class="w"> </span><span class="nv">contador</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">MutableLiveData</span><span class="o">&lt;</span><span class="kt">Int</span><span class="o">&gt;</span><span class="p">()</span>

<span class="w">    </span><span class="kd">fun</span><span class="w"> </span><span class="nf">incrementar</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kd">val</span><span class="w"> </span><span class="nv">valorActual</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">contador</span><span class="p">.</span><span class="na">value</span><span class="w"> </span><span class="o">?:</span><span class="w"> </span><span class="m">0</span>
<span class="w">        </span><span class="n">contador</span><span class="p">.</span><span class="na">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">valorActual</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="m">1</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

Y en la Activity/Fragment:

<div class="highlight"><pre><span></span><code><span class="n">miViewModel</span><span class="p">.</span><span class="na">contador</span><span class="p">.</span><span class="na">observe</span><span class="p">(</span><span class="k">this</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">valor</span><span class="w"> </span><span class="o">-&gt;</span>
<span class="w">    </span><span class="n">textView</span><span class="p">.</span><span class="na">text</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">valor</span><span class="p">.</span><span class="na">toString</span><span class="p">()</span>
<span class="p">}</span>
</code></pre></div>

</details>

<hr />
<h4 id="viewmodel">ViewModel</h4>
<p>Componente encargado de mantener y gestionar los datos que la interfaz de usuario (UI) necesita, asegurándose de que esos datos sobrevivan a cambios de configuración (como la rotación de pantalla). No es parte de Room en sí, es uno de los componentes principales que se usa junto con Room en la arquitectura recomendada (MVVM).</p>
<p>UI (Activity/Fragment)  &lt;---&gt;  ViewModel  &lt;---&gt;  Repository  &lt;---&gt;  Room (DAO, Database)</p>
<details>
<summary>Ejemplo</summary>

<div class="highlight"><pre><span></span><code><span class="kd">class</span><span class="w"> </span><span class="nc">UsuarioViewModel</span><span class="p">(</span><span class="kd">private</span><span class="w"> </span><span class="kd">val</span><span class="w"> </span><span class="nv">repo</span><span class="p">:</span><span class="w"> </span><span class="n">UsuarioRepository</span><span class="p">)</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">ViewModel</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">val</span><span class="w"> </span><span class="nv">listaUsuarios</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">repo</span><span class="p">.</span><span class="na">obtenerUsuarios</span><span class="p">()</span><span class="w"> </span><span class="c1">// Flow&lt;List&lt;Usuario&gt;&gt;</span>

<span class="w">    </span><span class="kd">fun</span><span class="w"> </span><span class="nf">insertar</span><span class="p">(</span><span class="n">usuario</span><span class="p">:</span><span class="w"> </span><span class="n">Usuario</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">viewModelScope</span><span class="p">.</span><span class="na">launch</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">repo</span><span class="p">.</span><span class="na">insertar</span><span class="p">(</span><span class="n">usuario</span><span class="p">)</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

Y en Fragment:

<div class="highlight"><pre><span></span><code><span class="n">viewLifecycleOwner</span><span class="p">.</span><span class="na">lifecycleScope</span><span class="p">.</span><span class="na">launch</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">viewModel</span><span class="p">.</span><span class="na">listaUsuarios</span><span class="p">.</span><span class="na">collect</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">usuarios</span><span class="w"> </span><span class="o">-&gt;</span>
<span class="w">        </span><span class="n">adapter</span><span class="p">.</span><span class="na">submitList</span><span class="p">(</span><span class="n">usuarios</span><span class="p">)</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

</details>
<hr />












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../..", "features": [], "search": "../../assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.13a4f30d.min.js"></script>
      
    
  </body>
</html>